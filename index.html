<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau Embedded Visualization</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="icon" href="https://sandiegozoowildlifealliance.org/sites/default/files/favicon_0_0.ico" type="image/vnd.microsoft.icon">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
        }
        .navbar {
            background-color: #ffffff !important;
        }
        .navbar-brand {
            color: #343a40 !important;
        }
        .nav-link {
            color: #343a40 !important;
        }
        .footer {
            background-color: #343a40;
            color: #ffffff;
        }
        .navbar img {
            height: 40px;
            margin-right: 10px;
        }
    </style>
<!-- <script>
    function createToken(userName,kid,secret,iss,scp){
  var header = {
    "alg": "HS256",
    "typ": "JWT",
    "iss": iss, //CONNECTED APP ID
    "kid": kid, //CONNECTED APP SECRET ID
  };
  var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));
  var encodedHeader = base64url(stringifiedHeader);
  var claimSet = {
    "sub": userName, // THE USER NAME, like aalteirac@tableau.com 
    "aud":"tableau",
    "nbf":Math.round(new Date().getTime()/1000)-100,
    "jti":new Date().getTime().toString(),
    "iss": iss,
    "scp": scp.split(","),
    "exp": Math.round(new Date().getTime()/1000)+100
  };
  var stringifiedData = CryptoJS.enc.Utf8.parse(JSON.stringify(claimSet));
  var encodedData = base64url(stringifiedData);
  var token = encodedHeader + "." + encodedData;
  var signature = CryptoJS.HmacSHA256(token, secret); //CONNECTED APP SECRET
  signature = base64url(signature);
  var signedToken = token + "." + signature;
  return signedToken;
}

//Base64URL is a modification of the main (https://base64.guru/standards/main) Base64 standard. 
function base64url(source) {
  encodedSource = CryptoJS.enc.Base64.stringify(source);
  encodedSource = encodedSource.replace(/=+$/, '');
  encodedSource = encodedSource.replace(/\+/g, '-');
  encodedSource = encodedSource.replace(/\//g, '_');
  return encodedSource;
}
    
</script>

        <script type="module">
          import { SheetType, TableauEventType } from 'https://prod-useast-b.online.tableau.com/javascripts/api/tableau.embedding.3.latest.js';
          (async () => {
            // Get the viz object from the HTML web component
            const viz = document.querySelector('tableau-viz');
            var userid="tc24.hot.wcag@gmail.com"
            // Client ID
            var iss="f3720490-9472-454d-aef2-303a24c22909"
            // Secret ID
            var kid="effdeef5-7c27-44a2-bb62-ddfc75760c9d"
            // Secret Key
            var secret="8nNt+gxIP7ZGX/TNbX1QnxCx9vz8MumglOoicsWwVZE="
            var scope="tableau:views:embed"
            var scopes = Array.from(scope).map(({ value }) => value);
            console.log(scopes)
            var token= createToken(userid,kid,secret,iss,scope);
            viz.token = token;

            // Wait for the viz to become interactive
            await new Promise((resolve, reject) => {
              // Add an event listener to verify the viz becomes interactive
              viz.addEventListener(TableauEventType.FirstInteractive, () => {
                console.log('Viz is interactive!');
                resolve();
              });

              viz.addEventListener(TableauEventType.VizLoadError, (error) => {
                const message = JSON.parse(error.detail.message);
                const errorMessage = JSON.parse(message.errorMessage);

                const displayMessage = `ca-error-${errorMessage.result.errors[0].code}`;
                reject(displayMessage);
              });
            });
          })();
        </script>  
 -->

</head>
<body">
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <!-- Image to the left of the navbar -->
            <a class="navbar-brand" href="#">
                <img src="https://sandiegozoowildlifealliance.org/themes/custom/park_stable/images/sdzwa-green.svg" alt="SDZWA Logo">
                
            </a>
            <h1>SAN DIEGO ZOO</h1>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Services</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content Section -->
    <div class="container mt-5">
        <h1 class="text-center mb-4">Tableau Embedded Visualization</h1>
        <!-- Tableau Embedded Visualization -->
        <div class="container d-flex justify-content-center align-items-center mb-4">
            <tableau-viz
                  src="https://prod-useast-b.online.tableau.com/#/site/johnkeegan/views/TCSanDiegoZooWorkbookEB4_2/StarterDashboard?:iid=1"
                  device="desktop"
                  hide-tabs
                  width="1350"
                  height="750"
                  toolbar="bottom"
                >
            </tableau-viz>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer bg-dark text-light py-4">
        <div class="container text-center">
            <span>&copy; 2024 Tableau Conference. All rights reserved.</span>
        </div>
    </footer>

    <!-- JS Imports -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
    <script type="module" src="https://prod-useast-b.online.tableau.com/javascripts/api/tableau.embedding.3.latest.min.js"></script>
    <script src="/js/embed.js"></script>
   </body>
</html>
